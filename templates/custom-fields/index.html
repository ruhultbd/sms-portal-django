{% extends 'base.html' %}

{% block content %}

<div class="manage-custom-field-container row">
    <div class="col-md-12">
        <main class="my_account">
            <div class="funnel_header">
                <h3 class="pull-left montserrat page-title">Custom Fields</h3>
                <div class="clearfix"></div>
                <div class="d-block">
                    <ul class="nav nav-tabs mb-3" id="customfieldtab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="customfield_systemfieldtab"
                               href="https://prepro2-smsportal.protibimbo.com/customfield/manage_default/systemfield"
                               role="tab" aria-controls="profile" aria-selected="false">
                                System Field
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " id="customfield_categorytab"
                               href="https://prepro2-smsportal.protibimbo.com/customfield/manage_default/category"
                               role="tab" aria-controls="category" aria-selected="true">
                                Category
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " id="customfield_campaigntreetab"
                               href="https://prepro2-smsportal.protibimbo.com/customfield/manage_default/campaigntree"
                               role="tab" aria-controls="home" aria-selected="true">
                                Campaign Tree
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="tab-content" id="messageTabContent">
                    <div class="tab-pane fade show active" id="customfield_systemfield" role="tabpanel"
                         aria-labelledby="profile-tab">
                        <!--                                 <div class="pull-right pb-3">
                                    <a href="" class="funnel_cus_btn roboto_condensed" data-toggle="modal" data-target="#md_view_model">Add New Custom Field</a>
                                </div>
                             -->
                        <div class="clearfix"></div>
                    </div>
                    <div class="tab-pane fade " id="customfield_category" role="tabpanel"
                         aria-labelledby="category-tab">
                        <div class="clearfix"></div>
                        <div class="row">
                            <form class="col-12 p-0" action="" method="post">
                                <div class="col-sm-12">
                                    <div class="card mb-3">
                                        <div class="card-body setting-card-body">
                                            <div class="form-group row">
                                                <div class="col-12 col-md-4">
                                                    <label class="col-form-label d-inline-block">Category</label>
                                                    <select name="category_id"
                                                            class="select2 form-control d-inline category_id">
                                                        <option value="" selected="selected">Select Campaign
                                                            Category
                                                        </option>
                                                        <option value="1">Gym</option>
                                                        <option value="10">Sensory Treatment</option>
                                                        <option value="14">Chiropractic</option>
                                                        <option value="30">Dental</option>
                                                        <option value="40">Attorney</option>
                                                        <option value="42">Medical</option>
                                                        <option value="46">Home Services</option>
                                                        <option value="50">Real Estate</option>
                                                        <option value="54">Cleaning Services</option>
                                                        <option value="61">Business</option>
                                                        <option value="216">Ftest</option>
                                                        <option value="218">Tel</option>
                                                        <option value="220">IT</option>
                                                        <option value="223">Test 7</option>
                                                    </select>
                                                </div>
                                                <div class="col-12 col-md-4 mt-4">
                                                    <div class="row">
                                                        <div class="col-lg-12 text-right mt-3">
                                                            <button type="submit" class="btn cus_button"
                                                                    name="category_default_btn"
                                                                    id="category_default_btn" value="1">
                                                                Go
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="tab-pane fade " id="customfield_default" role="tabpanel"
                         aria-labelledby="profile-tab">
                        <div class="clearfix"></div>
                        <div class="row">
                            <form class="col-12 p-0" action="" method="post">
                                <div class="col-sm-12">

                                    <div class="card mb-3">
                                        <!-- <div class="card-header">
                                            <h5 class="card-title mb-0">Trigger Point Category </h5>
                                        </div> -->
                                        <div class="card-body setting-card-body">
                                            <div class="form-group row">
                                                <div class="col-12 col-md-4">
                                                    <label class="col-form-label d-inline-block">Category</label>
                                                    <select name="category_id"
                                                            class="select2 form-control d-inline category_id">
                                                        <option value="" selected="selected">Select Campaign
                                                            Category
                                                        </option>
                                                        <option value="1">Gym</option>
                                                        <option value="10">Sensory Treatment</option>
                                                        <option value="14">Chiropractic</option>
                                                        <option value="30">Dental</option>
                                                        <option value="40">Attorney</option>
                                                        <option value="42">Medical</option>
                                                        <option value="46">Home Services</option>
                                                        <option value="50">Real Estate</option>
                                                        <option value="54">Cleaning Services</option>
                                                        <option value="61">Business</option>
                                                        <option value="216">Ftest</option>
                                                        <option value="218">Tel</option>
                                                        <option value="220">IT</option>
                                                        <option value="223">Test 7</option>
                                                    </select>
                                                </div>
                                                <div class="col-12 col-md-4">
                                                    <label class="col-form-label d-inline-block">Campaign
                                                        Tree</label>
                                                    <select name="sub_category_id"
                                                            class="form-control d-inline sub_category_id">
                                                        <option value=''>Select Campaign Tree</option>
                                                    </select>
                                                </div>
                                                <div class="col-12 col-md-4 mt-4">
                                                    <div class="row">
                                                        <div class="col-lg-12 text-right mt-3">
                                                            <button type="submit" class="btn cus_button"
                                                                    name="category_btn" id="campaign_category"
                                                                    value="1">
                                                                Go
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="funnel_table_wrapper table-responsive">
                <table width="100%" class="table table-striped" id="data-table">
                    <colgroup>
                        <col width="10%">
                        <col width="30%">
                        <col width="35%">
                        <col width="25%">
                    </colgroup>
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Field Name</th>
                        <th class="no-sort">Field Value</th>
                        <th class="text-center no-sort"></th>
                    </tr>
                    </thead>
                    <tbody>


                    <tr>
                        <td>1</td>
                        <td>customer_first_name</td>
                        <td>
                            Customer Name (SYSTEM FIELD)
                        </td>
                        <td class="text-right">
                        </td>
                    </tr>


                    <tr>
                        <td>2</td>
                        <td>appointment_date</td>
                        <td>
                            Date of Appointment (SYSTEM FIELD)
                        </td>
                        <td class="text-right">
                        </td>
                    </tr>


                    <tr>
                        <td>3</td>
                        <td>appointment_time</td>
                        <td>
                            Time of Appointment (SYSTEM FIELD)
                        </td>
                        <td class="text-right">
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </main>
    </div>
</div>

<script type="text/javascript">
    jQuery(document).ready(function () {
        $("body").on("change", '.category_id', function () {
            var categoryid = $(this).val();
            var element = this;
            $.ajax({
                type: 'POST',
                dataType: 'json',
                url: baseurl + "campaigns/fetch_campaign_subcategory",
                data: {
                    'category_id': categoryid ? categoryid : ``
                },
                success: function (data) {
                    // $('#subcategories1 option:not(:first)').remove();
                    $('.sub_category_id').find('option:not(:first)').remove();
                    if (data['subcategories'].length > 0) {
                        for (i = 0; i < data['subcategories'].length; i++) {
                            var sle = data['subcategories'][i]['id'] == `` ? 'selected' : '';
                            $('.sub_category_id').append(`
                                <option ${sle} value=${data['subcategories'][i]['id']}>${data['subcategories'][i]['category_name']}</option>
                            `);
                        }
                    }
                }
            });
        });

        jQuery('body .select2.category_id').select2({
            placeholder: "Select Category"
        });

            });


</script>


<style type="text/css">
    .modal.img-modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: hidden; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
    }

    /* Modal Content (image) */
    .img-modal .modal-content {
        margin: auto;
        display: block;
        width: auto;
        max-width: 700px;
        height: 80%;
        max-height: 80%;
    }

    /* Add Animation */
    .img-modal .modal-content, #caption {
        -webkit-animation-name: zoom;
        -webkit-animation-duration: 0.6s;
        animation-name: zoom;
        animation-duration: 0.6s;
    }

    .img-modal img.zoomout {
        -webkit-animation-name: zoomout;
        -webkit-animation-duration: 0.6s;
        animation-name: zoomout;
        animation-duration: 0.6s;
    }

    @-webkit-keyframes zoom {
        from {-webkit-transform:scale(0)}
        to {-webkit-transform:scale(1)}
    }

    @keyframes zoom {
        from {transform:scale(0)}
        to {transform:scale(1)}
    }

    @-webkit-keyframes zoomout {
        from {-webkit-transform:scale(1)}
        to {-webkit-transform:scale(0)}
    }

    @keyframes zoomout {
        from {transform:scale(1)}
        to {transform:scale(0)}
    }

    /* The Close Button */
    .img-modal .close {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
    }

    .img-modal .close:hover,
    .img-modal .close:focus {
        color: #bbb;
        text-decoration: none;
        cursor: pointer;
    }

    /* 100% Image Width on Smaller Screens */
    @media only screen and (max-width: 700px){
        .img-modal .modal-content {
            height: 100%;
        }
    }
    .cus-img:hover {
        cursor: pointer;
    }


</style>
<div class="modal img-modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="img01">
</div>

<script>
    jQuery(document).ready(function ($) {
        $("body").on("click", ".cus-img", function () {
            let imgsrc = $(this).attr('src');
            $('.img-modal').show();
            $("#img01").attr('src', imgsrc);
        });

        $("body").on("click", ".close", function () {
            $("#img01").addClass("zoomout");
            setTimeout(()=>{
                $('.img-modal').hide();
                $("#img01").removeClass("zoomout");
            }, 500)
        });
    });


</script>

{% endblock  %}
